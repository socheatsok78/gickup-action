# action.yml
name: 'Gickup Action'
description: 'A GitHub Action for backing up any git repositories using gickup'
branding:
  icon: 'award'
  color: 'green'

inputs:
  config:
    description: 'The gickup configuration file'
    default: '.gickup/gickup.yml'
  dryrun:
    description: 'Run gickup in dryrun mode'
    required: false
    default: 'false'
  debug:
    description: 'Run gickup in debug mode'
    required: false
    default: 'false'
  # Pass GitHub context, environment variables, variables, and secrets as JSON strings
  # This uses gomplate to provide these contexts to the configuration file
  # preventing the need to set secrets and variables in the gickup configuration file
  # which may lead to accidental exposure of sensitive information
  github:
    description: 'The GitHub context to pass to gickup'
    required: false
    default: '${{ toJson(github) }}'
  env:
    description: 'The Environment variables to pass to gickup'
    required: false
    default: '{}'
  vars:
    description: 'The Variables to pass to gickup'
    required: false
    default: '{}'
  secrets:
    description: 'The Secrets to pass to gickup'
    required: false
    default: '{}'

runs:
  using: 'docker'
  image: 'docker://ghcr.io/socheatsok78/gickup-action:v2'
